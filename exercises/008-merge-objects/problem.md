# Exercise 008 — merge-objects（日本語）

## Objective

- JSON-RPC 2.0 の `mergeObjects` メソッドを実装し、複数のオブジェクトをマージして返すサーバ/クライアントを作成する。衝突解決戦略を指定できる点が特徴。

## Specification

### JSON-RPC フィールド

- `jsonrpc`: リクエストとレスポンスで文字列 `"2.0"` とすること。
- `method`: `"mergeObjects"`。
- `params`: オブジェクトで、以下のキーを受け付ける:
  - `items`: マージ対象のオブジェクトの配列（少なくとも 1 個）
  - `strategy`（オプション）: `"last"`、`"first"`、`"concat"` のいずれか。デフォルトは `"last"`。
- `result`: 指定された戦略に従ってマージされたオブジェクト。

### 動作と検証

- `items` の各要素はオブジェクトであること。そうでない場合は `-32602`（Invalid params）を返す。
- マージのルール:
  - `last`: 後のオブジェクトが優先して上書きする。
  - `first`: 最初に現れたオブジェクトの値を保持する。
  - `concat`: 衝突する値が配列であれば配列を連結し、どちらかが配列でなければ配列に変換して連結する。
- ネストしたオブジェクトは再帰的にマージする。
- 通知の場合は応答を返さない。

## エラー処理

- 標準の JSON-RPC エラーコードを使用する（`-32700`、`-32600`、`-32601`、`-32602`、`-32603`）。

## 注意事項 / エッジケース

- `concat` 戦略では、値が配列でない場合は配列に変換してから連結する。
- 言語固有のオブジェクト順序の振る舞いがある場合は問題文に明記すること。

## 例

Request:
```json
{"jsonrpc":"2.0","method":"mergeObjects","params":{"items":[{"a":1,"b":[1]},{"b":[2],"c":3}],"strategy":"concat"},"id":1}
```

期待:
```json
{"jsonrpc":"2.0","result":{"a":1,"b":[1,2],"c":3},"id":1}
```

## 受け入れ条件

- 指定された戦略に従ってオブジェクトが正しくマージされること。
- 不正な入力では `-32602` を返す。無効な JSON では `-32700` を返し `id` は `null`。

## 難易度

- ⭐⭐⭐
